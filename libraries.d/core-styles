#!/usr/bin/env bash
# shellcheck disable=SC2034
# author: github.com/jcaillon
# description: This script provides the styles used in Valet.
#   A style is a set of colors and attributes that can be used to format text in the terminal.

STYLE_COLOR_ACCENT="${ESC__FG_BRIGHT_MAGENTA}"
STYLE_COLOR_PRIMARY="${ESC__FG_BRIGHT_CYAN}"
STYLE_COLOR_SECONDARY="${ESC__FG_BRIGHT_BLUE}"
STYLE_COLOR_FADED="${ESC__FG_BRIGHT_BLACK}"
STYLE_COLOR_DEBUG="${ESC__FG_BRIGHT_BLACK}"
STYLE_COLOR_INFO="${ESC__FG_CYAN}"
STYLE_COLOR_WARNING="${ESC__FG_YELLOW}"
STYLE_COLOR_SUCCESS="${ESC__FG_GREEN}"
STYLE_COLOR_ERROR="${ESC__FG_RED}"
STYLE_COLOR_DEFAULT="${ESC__FG_RESET}"

STYLE_RESET="${ESC__TEXT_RESET}"

if [[ ${VALET_CONFIG_STYLE_SQUARED_BOXES:-} == "true" ]]; then
  SYMBOL_TL_CORNER='┌'
  SYMBOL_TR_CORNER='┐'
  SYMBOL_BL_CORNER='└'
  SYMBOL_BR_CORNER='┘'
else
  SYMBOL_TL_CORNER='╭'
  SYMBOL_TR_CORNER='╮'
  SYMBOL_BL_CORNER='╰'
  SYMBOL_BR_CORNER='╯'
fi
SYMBOL_DIAGONAL='╱'
SYMBOL_HR_LINE='─'
SYMBOL_VR_LINE='│'

# help
STYLE_HELP_TITLE="${STYLE_COLOR_ERROR}"
STYLE_HELP_HIGHLIGHT="${STYLE_COLOR_ACCENT}"
STYLE_HELP_COMMAND="${STYLE_COLOR_WARNING}"
STYLE_HELP_ARGUMENT="${STYLE_COLOR_PRIMARY}"
STYLE_HELP_OPTION="${STYLE_COLOR_SECONDARY}"

# interactive
STYLE_ACTIVE_BUTTON="${ESC__TEXT_INVERSE}${STYLE_COLOR_ACCENT}"
STYLE_INACTIVE_BUTTON="${ESC__TEXT_INVERSE}${STYLE_COLOR_FADED}"
STYLE_FRAMES="${STYLE_COLOR_FADED}"

# prompt
SYMBOL_PROMPT="❯ "
SYMBOL_PROMPT_LENGTH=2
STYLE_PROMPT_STRING="${STYLE_COLOR_ACCENT}"
STYLE_PROMPT_VALIDATION_ERROR="${STYLE_COLOR_ERROR}"
STYLE_PROMPT_LETTER_HIGHLIGHT="${ESC__TEXT_INVERSE}${STYLE_COLOR_ACCENT}"
STYLE_PROMPT_LETTER_HIGHLIGHT_RESET="${ESC__TEXT_NO_INVERSE}${STYLE_COLOR_DEFAULT}"
SYMBOL_PROMPT_ERROR_BOX="█ "
SYMBOL_PROMPT_ERROR_BOX_LENGTH=2

# list
STYLE_LIST_SELECTED_ITEM="${ESC__BG_BLACK}${ESC__FG_WHITE}"
STYLE_LIST_UNSELECTED_ITEM="${STYLE_RESET}"
STYLE_LIST_EMPTY="${STYLE_COLOR_FADED}"
STYLE_LIST_COUNT_NUMBER="${STYLE_COLOR_SUCCESS}"
STYLE_LIST_COUNT_FRAME="${STYLE_COLOR_FADED}"
STYLE_LIST_LETTER_HIGHLIGHT="${ESC__TEXT_INVERSE}${STYLE_COLOR_ACCENT}"
STYLE_LIST_LETTER_HIGHLIGHT_RESET="${ESC__TEXT_NO_INVERSE}${STYLE_COLOR_DEFAULT}"
SYMBOL_LIST_EMPTY="${SYMBOL_DIAGONAL}" # this is the symbol used on each line when the list is empty
SYMBOL_LIST_FRAME_HR="${SYMBOL_HR_LINE}"
SYMBOL_LIST_LEFT_LENGTH=2
SYMBOL_LIST_LEFT_SELECTED_ITEM="${ESC__BG_BLACK}${STYLE_COLOR_ACCENT}█ ${STYLE_RESET}"
SYMBOL_LIST_LEFT_UNSELECTED_ITEM="${STYLE_COLOR_FADED}${SYMBOL_VR_LINE} ${STYLE_RESET}"
SYMBOL_LIST_LEFT_SEPARATOR_TOP="${SYMBOL_TL_CORNER}${SYMBOL_HR_LINE}"
SYMBOL_LIST_LEFT_SEPARATOR_BOTTOM="${SYMBOL_BL_CORNER}${SYMBOL_HR_LINE}"
SYMBOL_LIST_RIGHT_LENGTH=2
SYMBOL_LIST_RIGHT_WITH_SCROLL_BAR="${STYLE_COLOR_FADED} █${STYLE_RESET}"
SYMBOL_LIST_RIGHT_WITHOUT_SCROLL_BAR="${STYLE_COLOR_FADED} ${SYMBOL_VR_LINE}${STYLE_RESET}"
SYMBOL_LIST_RIGHT_SEPARATOR_TOP="${SYMBOL_HR_LINE}${SYMBOL_TR_CORNER}"
SYMBOL_LIST_RIGHT_SEPARATOR_BOTTOM="${SYMBOL_HR_LINE}${SYMBOL_BR_CORNER}"

if [[ ${VALET_CONFIG_ENABLE_COLORS:-} != "true" ]]; then
  # help
  STYLE_HELP_TITLE="${ESC__TEXT_INVERSE}"

  # interactive
  STYLE_ACTIVE_BUTTON="${ESC__TEXT_INVERSE}"
  STYLE_INACTIVE_BUTTON=""

  # prompt
  STYLE_PROMPT_LETTER_HIGHLIGHT="${ESC__TEXT_UNDERLINE}"
  STYLE_PROMPT_LETTER_HIGHLIGHT_RESET="${ESC__TEXT_NO_UNDERLINE}"
  STYLE_LIST_LETTER_HIGHLIGHT="${ESC__TEXT_UNDERLINE}"
  STYLE_LIST_LETTER_HIGHLIGHT_RESET="${ESC__TEXT_NO_UNDERLINE}"
  STYLE_LIST_SELECTED_ITEM="${ESC__TEXT_INVERSE}"
fi

ICON_ERROR=$'\uf2d3'
ICON_WARNING=$'\uf071'
ICON_SUCCESS=$'\uf14a'
ICON_INFO=$'\uf05a'
ICON_DEBUG=$'\uf188'
ICON_TRACE=$'\ue241'
ICON_ERROR_TRACE=$'\uf06e'
ICON_EXIT=$'\uf14c'
ICON_STOPPED=$'\uf256'
ICON_KILLED=$'\uf05e'
ICON_HALT=$'\uf28b'

if [[ ${VALET_CONFIG_ENABLE_NERDFONT_ICONS:-} != "true" ]]; then
  # we reset all the icon variables to a blank string
  _STYLE_VARS="${!ICON_*}"
  eval "${_STYLE_VARS// /"=''; "}=''"
  unset -v _STYLE_VARS
fi

# ░▒▓█