#!/usr/bin/env bash
# shellcheck disable=SC2034
# author: github.com/jcaillon
# description: This script provides the styles used in Valet.
#   A style is a set of colors and attributes that can be used to format text in the terminal.

STYLE_COLOR_ACCENT="${ESC__FG_BRIGHT_MAGENTA}"
STYLE_COLOR_PRIMARY="${ESC__FG_BRIGHT_CYAN}"
STYLE_COLOR_SECONDARY="${ESC__FG_BRIGHT_BLUE}"
STYLE_COLOR_FADED="${ESC__FG_BRIGHT_BLACK}"
STYLE_COLOR_DEBUG="${ESC__FG_BRIGHT_BLACK}"
STYLE_COLOR_INFO="${ESC__FG_CYAN}"
STYLE_COLOR_WARNING="${ESC__FG_YELLOW}"
STYLE_COLOR_SUCCESS="${ESC__FG_GREEN}"
STYLE_COLOR_ERROR="${ESC__FG_RED}"
STYLE_COLOR_DEFAULT="${ESC__FG_RESET}"

STYLE_RESET="${ESC__TEXT_RESET}"

if [[ ${VALET_CONFIG_STYLE_SQUARED_BOXES:-} == "true" ]]; then
  DRAW_TL_CORNER='┌'
  DRAW_TR_CORNER='┐'
  DRAW_BL_CORNER='└'
  DRAW_BR_CORNER='┘'
else
  DRAW_TL_CORNER='╭'
  DRAW_TR_CORNER='╮'
  DRAW_BL_CORNER='╰'
  DRAW_BR_CORNER='╯'
fi

DRAW_DIAGONAL='╲'

# help
STYLE_HELP_TITLE="${STYLE_COLOR_ERROR}"
STYLE_HELP_HIGHLIGHT="${STYLE_COLOR_ACCENT}"
STYLE_HELP_COMMAND="${STYLE_COLOR_WARNING}"
STYLE_HELP_ARGUMENT="${STYLE_COLOR_PRIMARY}"
STYLE_HELP_OPTION="${STYLE_COLOR_SECONDARY}"

# interactive
STYLE_ACTIVE_BUTTON="${ESC__TEXT_INVERSE}${STYLE_COLOR_ACCENT}"
STYLE_INACTIVE_BUTTON="${ESC__TEXT_INVERSE}${STYLE_COLOR_FADED}"
STYLE_FRAMES="${STYLE_COLOR_FADED}"

# prompt
STYLE_PROMPT_SYMBOL="❯ "
STYLE_PROMPT_SYMBOL_LENGTH=2
STYLE_PROMPT_STRING="${STYLE_COLOR_ACCENT}"
STYLE_PROMPT_VALIDATION_ERROR="${STYLE_COLOR_ERROR}"
STYLE_PROMPT_LETTER_HIGHLIGHT="${ESC__TEXT_INVERSE}${STYLE_COLOR_ACCENT}"
STYLE_PROMPT_LETTER_HIGHLIGHT_RESET="${ESC__TEXT_NO_INVERSE}${STYLE_COLOR_DEFAULT}"
STYLE_PROMPT_ERROR_BOX_SYMBOL="█ "
STYLE_PROMPT_ERROR_BOX_SYMBOL_LENGTH=2

STYLE_LIST_COUNT="${STYLE_COLOR_SUCCESS}"
STYLE_LIST_SELECTED_ITEM="${ESC__BG_BLACK}${ESC__FG_WHITE}"
STYLE_LIST_SELECTED_ITEM_SYMBOL="${ESC__BG_BLACK}${STYLE_COLOR_ACCENT}"
STYLE_LIST_UNSELECTED_ITEM=""
STYLE_LIST_SYMBOL_SELECTED_ITEM="█ "
STYLE_LIST_SYMBOL_UNSELECTED_ITEM="│ "
STYLE_LIST_SYMBOL_LENGTH=2
STYLE_LIST_SYMBOL_COUNTER="──"
STYLE_LIST_SYMBOL_COUNTER_BOX_ABOVE="${DRAW_BL_CORNER}─"
STYLE_LIST_SYMBOL_COUNTER_BOX_BELOW="${DRAW_TL_CORNER}─"
STYLE_LIST_LETTER_HIGHLIGHT="${ESC__TEXT_INVERSE}${STYLE_COLOR_ACCENT}"
STYLE_LIST_LETTER_HIGHLIGHT_RESET="${ESC__TEXT_NO_INVERSE}${STYLE_COLOR_DEFAULT}"


if [[ ${VALET_CONFIG_ENABLE_COLORS:-} != "true" ]]; then
  # help
  STYLE_HELP_TITLE="${ESC__TEXT_INVERSE}"

  # interactive
  STYLE_ACTIVE_BUTTON="${ESC__TEXT_INVERSE}"
  STYLE_INACTIVE_BUTTON=""

  # prompt
  STYLE_PROMPT_LETTER_HIGHLIGHT="${ESC__TEXT_UNDERLINE}"
  STYLE_PROMPT_LETTER_HIGHLIGHT_RESET="${ESC__TEXT_NO_UNDERLINE}"
  STYLE_PROMPT_SELECTED_ITEM="${ESC__TEXT_INVERSE}"
  STYLE_PROMPT_SELECTED_ITEM_SYMBOL="${ESC__TEXT_INVERSE}"
fi

STYLE_ICON_ERROR=$'\uf2d3'
STYLE_ICON_WARNING=$'\uf071'
STYLE_ICON_SUCCESS=$'\uf14a'
STYLE_ICON_INFO=$'\uf05a'
STYLE_ICON_DEBUG=$'\uf188'
STYLE_ICON_TRACE=$'\ue241'
STYLE_ICON_ERROR_TRACE=$'\uf06e'
STYLE_ICON_EXIT=$'\uf14c'
STYLE_ICON_STOPPED=$'\uf256'
STYLE_ICON_KILLED=$'\uf05e'

if [[ ${VALET_CONFIG_ENABLE_NERDFONT_ICONS:-} != "true" ]]; then
  # we reset all the icon variables to a blank string
  _STYLE_VARS="${!STYLE_ICON_*}"
  eval "${_STYLE_VARS// /"=''; "}=''"
  unset -v _STYLE_VARS
fi
